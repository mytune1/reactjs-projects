{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _reactDom = require('react-dom');\n\nvar _region = require('region');\n\nvar _region2 = _interopRequireDefault(_region);\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _dragHelper = require('drag-helper');\n\nvar _dragHelper2 = _interopRequireDefault(_dragHelper);\n\nvar _color = require('./color');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar emptyFn = function emptyFn() {};\n\nvar toColorValue = function toColorValue(value) {\n  if (typeof value == 'string') {\n    return (0, _color.toHsv)(value);\n  }\n\n  return {\n    h: value.h,\n    s: value.s,\n    v: value.v,\n    a: value.a\n  };\n};\n\nexports.default = {\n  toColorValue: toColorValue,\n  getDOMRegion: function getDOMRegion() {\n    return _region2.default.fromDOM((0, _reactDom.findDOMNode)(this));\n  },\n  onMouseDown: function onMouseDown(event) {\n    event.preventDefault();\n    var region = this.getDOMRegion();\n    var info = this.getEventInfo(event, region);\n    (0, _dragHelper2.default)(event, {\n      scope: this,\n      constrainTo: region,\n      onDragStart: function onDragStart(event, config) {\n        config.initialPoint = info;\n        config.minLeft = 0;\n        config.maxLeft = region.width;\n        this.handleDragStart(event);\n      },\n      onDrag: function onDrag(event, config) {\n        var info = this.getEventInfo(event, region);\n        this.updateColor(info);\n        this.handleDrag(event, config);\n      },\n      onDrop: function onDrop(event, config) {\n        var info = this.getEventInfo(event, region);\n        this.updateColor(info);\n        this.handleDrop(event, config);\n      }\n    });\n    this.updateColor(info);\n    this.handleMouseDown(event, {\n      initialPoint: info\n    });\n  },\n  handleMouseDown: function handleMouseDown(event, config) {\n    ;\n    (this.props.onMouseDown || emptyFn).apply(this, this.getColors());\n    this.handleDrag(event, config);\n  },\n  handleUpdate: function handleUpdate(event, config) {\n    var diff = config.diff || {\n      top: 0,\n      left: 0\n    };\n    var initialPoint = config.initialPoint;\n\n    if (initialPoint) {\n      var top = void 0;\n      var left = void 0;\n      left = initialPoint.x + diff.left;\n      top = initialPoint.y + diff.top;\n      left = Math.max(left, config.minLeft);\n      left = Math.min(left, config.maxLeft);\n      this.state.top = top;\n      this.state.left = left;\n      this.state.mouseDown = {\n        x: left,\n        y: top,\n        width: initialPoint.width,\n        height: initialPoint.height\n      };\n    }\n\n    if (this.props.inPicker) {\n      //the picker handles the values\n      return;\n    }\n\n    if (!this.props.value) {\n      this.setState({\n        value: this.hsv\n      });\n    }\n  },\n  handleDragStart: function handleDragStart(event) {},\n  handleDrag: function handleDrag(event, config) {\n    this.handleUpdate(event, config);\n    (this.props.onDrag || emptyFn).apply(this, this.getColors());\n  },\n  handleDrop: function handleDrop(event, config) {\n    this.handleUpdate(event, config);\n    this.state.mouseDown = false;\n    (this.props.onChange || emptyFn).apply(this, this.getColors());\n  },\n  getColors: function getColors() {\n    var first = this.props.inPicker ? this.hsv : this.toStringValue(this.hsv);\n    var args = [first];\n\n    if (!this.props.inPicker) {\n      args.push((0, _objectAssign2.default)({}, this.hsv));\n    }\n\n    return args;\n  },\n  getEventInfo: function getEventInfo(event, region) {\n    region = region || this.getDOMRegion();\n    var x = event.clientX - region.left;\n    var y = event.clientY - region.top;\n    return {\n      x: x,\n      y: y,\n      width: region.getWidth(),\n      height: region.getHeight()\n    };\n  }\n};","map":null,"metadata":{},"sourceType":"script"}